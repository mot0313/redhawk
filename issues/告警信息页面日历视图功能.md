# 告警信息页面日历视图功能

## 功能概述
在告警信息页面添加了日历视图功能，用于以日历形式查看计划的维修组件，提供更直观的维修计划管理方式。

## 功能特性

### 1. 视图切换
- 在告警信息页面顶部添加了"列表视图"和"日历视图"切换按钮
- 默认显示列表视图，用户可以随时切换到日历视图
- 视图切换时会自动加载对应的数据

### 2. 日历显示
- 使用Element Plus的el-calendar组件展示月历
- 每个日期单元格显示当天安排的维修计划
- 支持月份切换，自动加载对应月份的维修计划数据

### 3. 维修项目展示
- 每个维修项目显示设备名称、组件类型和维修时间
- 根据紧急程度使用不同颜色标识：
  - 红色：紧急告警
  - 橙色：择期告警
- 根据维修状态显示不同的边框样式：
  - 蓝色左边框：已计划
  - 绿色左边框：进行中
  - 灰色左边框：已完成
  - 红色左边框：已取消

### 4. 交互功能
- 点击维修项目可查看告警详情
- 鼠标悬停时项目会有放大效果
- 支持日历月份导航，切换月份时自动更新数据

### 5. 用户体验优化
- 加载时显示骨架屏
- 日历顶部显示功能说明
- 今日无维修计划时显示友好提示
- 响应式设计，适配不同屏幕尺寸

## 技术实现

### 前端部分

#### 组件改动
- **文件**: `frontend/src/views/redfish/alert/index.vue`
- **新增功能**:
  - 视图模式切换（list/calendar）
  - 日历组件集成
  - 维修项目渲染和样式
  - 数据加载和缓存机制

#### API集成
- **文件**: `frontend/src/api/redfish/alert.js`
- **新增接口**: `getCalendarMaintenance(startDate, endDate)`

#### 样式设计
- 日历单元格自定义样式
- 维修项目卡片设计
- 状态标识和颜色系统
- 响应式布局适配

### 后端部分

#### 控制器层
- **文件**: `backend/module_redfish/controller/alert_controller.py`
- **新增接口**: `GET /redfish/alert/calendar-maintenance`
- **参数**: start_date (开始日期), end_date (结束日期)
- **返回**: 指定时间范围内的维修计划列表

#### 服务层
- **文件**: `backend/module_redfish/service/alert_service.py`
- **新增方法**: `get_calendar_maintenance_services()`
- **功能**: 数据格式转换和业务逻辑处理

#### 数据访问层
- **文件**: `backend/module_redfish/dao/alert_dao.py`
- **新增方法**: `get_calendar_maintenance()`
- **功能**: 查询指定时间范围内有维修计划的告警数据

### 数据流程

1. **前端请求**: 用户切换到日历视图或更改月份
2. **数据计算**: 计算当前显示月份的日期范围（含前后一周缓冲）
3. **API调用**: 调用`getCalendarMaintenance`接口获取维修计划
4. **后端查询**: 查询数据库中指定时间范围的维修计划记录
5. **数据渲染**: 前端将数据按日期分组并渲染到日历单元格

## 使用说明

### 操作步骤
1. 进入告警管理页面
2. 点击页面顶部的"日历视图"按钮
3. 查看当月的维修计划安排
4. 使用日历导航切换到其他月份
5. 点击维修项目查看详细信息

### 注意事项
- 日历视图只显示已安排维修时间的告警
- 数据会根据选择的月份动态加载
- 建议在大屏幕设备上使用以获得最佳体验

## 权限要求
- 需要`redfish:alert:maintenance`权限才能访问日历维修计划功能
- 继承告警管理的现有权限控制体系

## 扩展性
该功能设计具有良好的扩展性，未来可以考虑添加：
- 维修计划的拖拽排期
- 批量操作功能
- 导出维修计划
- 维修提醒和通知
- 与外部日历系统集成

## 兼容性
- 兼容现有的告警管理功能
- 不影响原有的列表视图
- 保持数据模型的一致性
- 支持现有的权限和审计机制 