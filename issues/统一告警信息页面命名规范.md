# 统一告警信息页面命名规范

## 背景分析

告警信息页面当前存在命名不一致问题：
- 参数命名：已使用 `@as_query` + `alias_generator=to_camel` （✅统一）
- 响应命名：混合使用 `CamelCaseUtil.transform_result()` 和未配置驼峰的 Pydantic 转换（❌不统一）
- 响应格式：混合使用 `model_content` 和 `data` 参数（❌不统一）

## 目标

统一告警信息页面的响应命名规范，与设备管理页面保持一致：
- 所有响应数据使用驼峰命名
- 使用 Pydantic 模型替代手动转换
- 统一响应格式使用 `model_content`

## 实施计划

### 1. 修改响应模型
**文件**: `backend/module_redfish/entity/vo/alert_vo.py`
- 为现有响应模型添加 `alias_generator=to_camel` 配置
  - `AlertStatisticsModel`
  - `AlertTrendModel`
  - `RealtimeAlertModel`
  - `ScheduledAlertModel`
  - `AlertDistributionModel`
- 创建新的统一响应模型
  - `AlertPageResponseModel` - 告警列表分页响应
  - `AlertDetailResponseModel` - 告警详情响应
  - `AlertStatsResponseModel` - 告警统计响应

### 2. 修改服务层
**文件**: `backend/module_redfish/service/alert_service.py`
- 在 `get_alert_list_services` 中使用新的分页响应模型
- 修改 `get_alert_statistics_services` 等方法返回配置驼峰命名的模型
- 替换所有 `CamelCaseUtil.transform_result()` 使用
- 添加数据转换方法，将数据库对象转换为响应模型

### 3. 更新控制器
**文件**: `backend/module_redfish/controller/alert_controller.py`
- 修改所有接口使用 `ResponseUtil.success(model_content=response_model)`
- 更新接口的 `response_model` 声明
- 移除混合使用的 `data` 参数
- 统一响应格式

### 4. 前端兼容性测试
**文件**: `frontend/src/views/redfish/alert/index.vue`
- 测试告警列表显示是否正常
- 测试告警详情显示是否正常
- 测试日历视图功能是否正常
- 测试导出功能是否正常

### 5. 前端代码调整（如需要）
- 检查响应数据访问方式（`response.data` vs `response`）
- 根据 `model_content` 响应格式调整访问方式
- 确保字段名访问与驼峰命名一致

## 影响的接口

需要统一的接口包括：
- `GET /list` - 告警列表（部分已统一）
- `GET /statistics` - 告警统计
- `GET /trend` - 告警趋势
- `GET /realtime` - 实时告警
- `GET /scheduled` - 择期告警
- `GET /distribution` - 告警分布
- `GET /{alert_id}` - 告警详情
- `GET /calendar-maintenance` - 日历维修计划

## 风险控制

1. **渐进式改造**：每个步骤完成后进行测试
2. **代码备份**：保留原有代码作为回退方案
3. **环境验证**：先在开发环境验证，再部署到生产环境

## 预期效果

- ✅ 统一的命名规范
- ✅ 更好的代码质量
- ✅ 更易维护的代码结构
- ✅ 与设备管理页面保持一致
- ✅ 前端功能正常，显示无异常

## 时间估计

- 修改响应模型：45分钟
- 更新服务层：60分钟
- 修改控制器：45分钟
- 测试和调整：60分钟
- **总计：约3.5小时**

## 参考实现

参考设备管理页面的统一改造：
- `backend/module_redfish/entity/vo/device_vo.py`
- `backend/module_redfish/service/device_service.py`
- `backend/module_redfish/controller/device_controller.py`
- 连通性统计API的实现模式 