# 统一设备管理页面命名规范

## 背景分析

设备管理页面当前存在命名不一致问题：
- 参数命名：已使用 `@as_query` + `alias_generator=to_camel` （✅统一）
- 响应命名：混合使用 `CamelCaseUtil.transform_result()` 和 Pydantic 转换（❌不统一）

## 目标

统一设备管理页面的响应命名规范，与连通性统计API保持一致：
- 所有响应数据使用驼峰命名
- 使用 Pydantic 模型替代手动转换
- 提高代码质量和维护性

## 实施计划

### 1. 创建响应模型
**文件**: `backend/module_redfish/entity/vo/device_vo.py`
- 创建 `DevicePageResponseModel` 类
- 创建 `DeviceDetailResponseModel` 类
- 创建 `DeviceStatsResponseModel` 类
- 所有模型使用 `alias_generator=to_camel`

### 2. 修改服务层
**文件**: `backend/module_redfish/service/device_service.py`
- 在 `get_device_list_services` 中添加数据转换方法
- 将数据库对象转换为 `DeviceResponseModel` 对象
- 构造 `DevicePageResponseModel` 返回
- 替换 `CamelCaseUtil.transform_result()` 使用

### 3. 更新控制器
**文件**: `backend/module_redfish/controller/device_controller.py`
- 修改 `get_device_list` 接口使用新的响应模型
- 修改 `get_device_detail` 接口使用统一格式
- 修改 `get_device_statistics` 接口使用统一格式
- 使用 `ResponseUtil.success(model_content=response_model)`

### 4. 前端兼容性测试
**文件**: `frontend/src/views/redfish/device/index.vue`
- 测试设备列表显示是否正常
- 测试设备详情显示是否正常
- 测试机房可视化功能是否正常

### 5. 前端代码调整（如需要）
- 根据测试结果调整前端数据访问方式
- 确保与 `model_content` 的响应格式兼容

## 风险控制

1. **渐进式改造**：每个步骤完成后进行测试
2. **代码备份**：保留原有代码作为回退方案
3. **环境验证**：先在开发环境验证，再部署到生产环境

## 预期效果

- ✅ 统一的命名规范
- ✅ 更好的代码质量
- ✅ 更易维护的代码结构
- ✅ 与连通性统计API保持一致
- ✅ 前端功能正常，显示无异常

## 时间估计

- 创建响应模型：30分钟
- 修改服务层：45分钟
- 更新控制器：30分钟
- 测试和调整：45分钟
- **总计：约2.5小时**

## 参考实现

参考连通性统计API的实现：
- `backend/module_redfish/entity/vo/connectivity_vo.py`
- `backend/module_redfish/controller/connectivity_controller.py`
- `frontend/src/views/redfish/device/index.vue` (连通性统计部分) 